<!-- PARTIAL: /partials/auth-modal.html -->
<div id="auth-modal" class="auth-modal" aria-hidden="true" role="dialog" aria-label="Log ind" style="display:none">
  <div class="auth-backdrop" data-auth-close></div>
  <div class="auth-card block" role="document" style="max-width:480px;margin:10vh auto;background:#fff">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <h2 style="margin:0;font-size:20px">Log ind</h2>
      <button class="btn" data-auth-close aria-label="Luk">Luk</button>
    </div>
    <p class="small">Brug din e-mail for magic link eller vælg Google.</p>

    <form id="auth-email-form" style="display:grid;gap:8px;margin-top:10px">
      <input id="auth-email" type="email" required placeholder="din@email.dk"
             style="padding:10px 12px;border:1px solid var(--line);border-radius:10px" />
      <button class="btn primary" type="submit">Send login-link</button>
    </form>

    <div style="margin:12px 0;text-align:center" class="small">eller</div>

    <button id="auth-google" class="btn" type="button" style="width:100%">Fortsæt med Google</button>

    <p id="auth-msg" class="small" style="margin-top:10px;color:var(--muted)"></p>
  </div>
</div>

<style>
.auth-modal.is-open{ display:block; }
.auth-backdrop{ position:fixed; inset:0; background:rgba(2,8,23,.45); }
.auth-card{ position:relative; z-index:2; }
</style>

<script>
(function(){
  function ready(fn){
    if (document.readyState==='complete' || document.readyState==='interactive') return fn();
    document.addEventListener('DOMContentLoaded', fn);
  }
  ready(function(){
    var modal = document.getElementById('auth-modal');
    if (!modal) return;

    function close(){
      modal.classList.remove('is-open');
      document.documentElement.style.overflow = '';
      history.replaceState(null, '', location.pathname + location.search); // fjern #login
    }
    modal.addEventListener('click', function(e){
      if (e.target.matches('[data-auth-close], .auth-backdrop')) close();
    });

    // Åbn hvis hash siger #login (fx første load)
    if (location.hash === '#login'){
      modal.classList.add('is-open');
      document.documentElement.style.overflow = 'hidden';
    }
  });
})();
</script>
