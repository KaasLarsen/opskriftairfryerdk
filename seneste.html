<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Seneste Opskrifter – Opskrift-Airfryer.dk</title>
<meta name="description" content="Alle de nyeste airfryer opskrifter samlet ét sted. Nemt, sprødt og hurtigt – med tider og temperaturer." />
<link rel="icon" href="/img/favicon.ico" />
<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7373148222153531" crossorigin="anonymous"></script>
<style>
/* Clean list page */
*,*::before,*::after{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#0f172a;background:#fff;line-height:1.65}
a{text-decoration:none;color:inherit}img{max-width:100%;display:block}
:root{--max:1200px;--pad:16px;--text:#0f172a;--muted:#475569;--line:#e2e8f0;--soft:#f8fafc;--accent:#0ea5e9;--radius:14px;--shadow:0 8px 22px rgba(2,8,23,.06)}
.container{max-width:var(--max);margin:0 auto;padding:0 var(--pad)}
.header{background:#fff;border-bottom:1px solid var(--line);box-shadow:0 2px 6px rgba(2,8,23,.04)}
.hero{padding:22px 0 12px}
.kicker{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
h1{font-size:clamp(26px,3vw,38px);line-height:1.2;margin:6px 0 8px}
.lead{margin:0;color:var(--muted)}
.section{margin:24px 0}
.section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.section-head h2{font-size:22px;margin:0}
.grid{display:grid;gap:16px}
.grid-3{grid-template-columns:repeat(3,1fr)}
@media(max-width:900px){.grid-3{grid-template-columns:1fr 1fr}}
@media(max-width:560px){.grid-3{grid-template-columns:1fr}}
.card{border:1px solid var(--line);border-radius:14px;background:#fff;box-shadow:var(--shadow);overflow:hidden;display:block;transition:transform .06s ease}
.card:hover{transform:translateY(-2px)}
.thumb-icon{aspect-ratio:16/9;display:grid;place-items:center;background:linear-gradient(180deg,#f8fafc,#fff)}
.thumb-icon svg{width:54px;height:54px;color:var(--accent)}
.card-body{padding:12px 14px}
.card-body h3{font-size:15px;line-height:1.35;margin:0}
.meta{font-size:13px;color:var(--muted);margin-top:4px}
.adsbygoogle[data-ad-status="unfilled"]{display:none !important}
svg.hidden{position:absolute;width:0;height:0;overflow:hidden}
</style>
</head>
<body>

<!-- Ikoner + header -->
<div data-include="/partials/icons.html"></div>
<div data-include="/partials/header.html"></div>

<main class="container">
  <!-- HERO -->
  <section class="hero">
    <span class="kicker">Overblik</span>
    <h1 id="page-title">Seneste Opskrifter</h1>
    <p class="lead" id="page-lead">De nyeste airfryer opskrifter – altid med tider og temperaturer.</p>
  </section>

  <!-- Annonce -->
  <div style="margin:8px 0 18px">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-7373148222153531"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>

  <!-- Liste (seneste først eller søg) -->
  <section class="section">
    <div class="section-head">
      <h2 id="list-title">Alle</h2>
    </div>
    <div id="alle-grid" class="grid grid-3"></div>
  </section>
</main>

<!-- Footer -->
<div data-include="/partials/footer.html"></div>
<script src="/assets/include.js?v=4"></script>

<!-- Data + rendering -->
<script src="/assets/recipes.js?v=2"></script>
<script>
/* Minimal renderer som matcher kort-designet på tværs af siden */
function iconSvg(id){ return '<div class="thumb-icon"><svg><use href="#'+(id||'star')+'"/></svg></div>'; }
function cardHTML(rec){
  return [
    '<a class="card" href="/opskrifter/'+rec.slug+'.html">',
      iconSvg(rec.icon),
      '<div class="card-body">',
        '<h3>'+rec.title+'</h3>',
        rec.meta ? '<p class="meta">'+rec.meta+'</p>' : '',
      '</div>',
    '</a>'
  ].join('');
}
function renderList(list, mountId){
  const el = document.getElementById(mountId);
  if(!el) return;
  el.innerHTML = list.map(cardHTML).join('');
}

/* Søg-normalisering (æ/ø/å osv.) */
function norm(s){
  return (s||'').toLowerCase()
    .replace(/æ/g,'ae').replace(/ø/g,'oe').replace(/å/g,'aa')
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim();
}
function matches(rec, q){
  const nq = norm(q);
  const fields = [
    rec.title,
    rec.meta,
    (rec.categories||[]).join(' ')
  ].map(norm);
  return fields.some(f => f.includes(nq));
}

/* Boot: vent på AFO.ready, håndtér ?soeg=, og render */
(function(){
  const params = new URLSearchParams(location.search);
  const qRaw = params.get('soeg') || '';
  const h2 = document.getElementById('list-title');
  const lead = document.getElementById('page-lead');

  if (window.AFO && AFO.ready) {
    AFO.ready.then(() => {
      const all = (window.RECIPES || []);
      if (qRaw && qRaw.trim()){
        const results = all
          .filter(r => matches(r, qRaw))
          .sort((a,b)=> (b.date||'').localeCompare(a.date||''));
        h2.textContent = `Søgeresultater (${results.length})`;
        lead.textContent = `Viser opskrifter der matcher “${qRaw}”.`;
        renderList(results, 'alle-grid');
        if (results.length) {
          setTimeout(()=>window.scrollTo({top: document.getElementById('alle-grid').offsetTop - 20, behavior:'smooth'}), 50);
        }
      } else {
        h2.textContent = 'Alle';
        const latest = all.sort((a,b)=> (b.date||'').localeCompare(a.date||''));
        renderList(latest, 'alle-grid');
      }
    });
  } else {
    // fallback: hvis AFO ikke er loaded af en eller anden grund
    document.getElementById('alle-grid').innerHTML = '<p class="meta">Kunne ikke hente opskrifter.</p>';
  }
})();
</script>
</body>
</html>
