<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Guides & Tips – Opskrift-Airfryer.dk</title>
<meta name="description" content="Alle vores airfryer guides samlet ét sted – tider, temperaturer, rengøring, udstyr, fejlfinding og meget mere." />
<link rel="icon" href="/img/favicon.ico" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7373148222153531" crossorigin="anonymous"></script>
<style>
*,*::before,*::after{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#0f172a;background:#fff;line-height:1.65}
a{text-decoration:none;color:inherit}img{max-width:100%;display:block}
:root{--max:1200px;--pad:16px;--text:#0f172a;--muted:#475569;--line:#e2e8f0;--soft:#f8fafc;--accent:#ec4899;--accent-soft:#fce7f3;--radius:14px;--shadow:0 8px 22px rgba(2,8,23,.06)}
.container{max-width:var(--max);margin:0 auto;padding:0 var(--pad)}
.hero{padding:12px 0 8px}
.kicker{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
h1{font-size:clamp(26px,3vw,38px);line-height:1.2;margin:6px 0 8px}
.lead{margin:0;color:var(--muted)}
.section{margin:18px 0}
.section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.section-head h2{font-size:22px;margin:0}
.grid{display:grid;gap:16px}
.grid-3{grid-template-columns:repeat(3,1fr)}
@media(max-width:900px){.grid-3{grid-template-columns:1fr 1fr}}
@media(max-width:560px){.grid-3{grid-template-columns:1fr}}
.card{border:1px solid var(--line);border-radius:14px;background:#fff;box-shadow:var(--shadow);overflow:hidden;display:block;transition:transform .06s}
.card:hover{transform:translateY(-2px)}
.thumb-icon{aspect-ratio:16/9;display:grid;place-items:center;background:linear-gradient(180deg,#f8fafc,#fff)}
.thumb-icon svg{width:54px;height:54px;color:var(--accent)}
.card-body{padding:12px 14px}
.card-body h3{font-size:15px;line-height:1.35;margin:0}
.meta{font-size:13px;color:var(--muted);margin-top:4px}
.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}
.input{
  padding:12px 14px;
  border:2px solid var(--accent);
  border-radius:14px;
  min-width:260px;
  width:min(700px,100%);
  font-size:15px;
  background:var(--accent-soft);
  outline:none;
}
.input:focus{box-shadow:0 0 0 4px rgba(236,72,153,.15)}
.badge{display:inline-block;background:#fff;border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:13px}
.copy{color:#64748b;font-size:13px;text-align:center;margin:12px 0 0}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.adsbygoogle[data-ad-status="unfilled"]{display:none !important}
</style>
</head>
<body>

<!-- Partials -->
<div data-include="/partials/icons.html"></div>
<div data-include="/partials/header.html"></div>

<main class="container">
  <section class="hero">
    <span class="kicker">Overblik</span>
    <h1>Guides & Tips</h1>
    <p class="lead">Alle vores airfryer guides samlet ét sted – tider, temperaturer, rengøring, udstyr, fejlfinding og meget mere.</p>

    <div class="controls" role="search">
      <label class="sr-only" for="q">Søg i guides</label>
      <input id="q" class="input" type="search" placeholder="Søg i guides… (fx rengøring, tider, bacon)" autocomplete="off" />
      <span id="count" class="badge" style="display:none"></span>
    </div>
  </section>

  <section class="section">
    <div class="section-head">
      <h2>Alle Guides</h2>
    </div>
    <div id="guides-grid" class="grid grid-3"><p class="meta">Indlæser…</p></div>
    <p id="empty" class="copy" style="display:none">Ingen guides matcher din søgning.</p>
  </section>

  <!-- Annonce -->
  <div class="ad-wrap" style="margin:8px 0 18px">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-7373148222153531"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>
</main>

<div data-include="/partials/footer.html"></div>
<script src="/assets/include.js?v=4"></script>

<script>
(function(){
  const PRIMARY_SITEMAP = '/guides-sitemap.xml';
  const FALLBACK_SITEMAP = '/airfryer-guides-sitemap.xml';
  const CACHE_KEY = 'GUIDES_CACHE_v6';
  const CACHE_TTL_MS = 12 * 60 * 60 * 1000;

  const grid = document.getElementById('guides-grid');
  const countBadge = document.getElementById('count');
  const empty = document.getElementById('empty');
  const q = document.getElementById('q');

  const debounce = (fn, ms=200)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), ms); }; };

  function titleFromSlug(slug){
    try{
      const name = slug.replace(/\.html$/,'').split('/').pop()
        .replace(/-/g,' ')
        .replace(/\b\w/g, m => m.toUpperCase());
      return name;
    }catch(e){ return slug; }
  }

  function card(href){
    const title = titleFromSlug(href);
    return `
      <a class="card" href="${href}">
        <div class="thumb-icon"><svg><use href="#star"></use></svg></div>
        <div class="card-body">
          <h3>${title}</h3>
          <p class="meta">Guide</p>
        </div>
      </a>`;
  }

  function render(urls){
    const term = (q.value || '').toLowerCase().trim();
    let filtered = urls;
    if(term){
      filtered = urls.filter(u => titleFromSlug(u).toLowerCase().includes(term));
    }
    countBadge.textContent = `${filtered.length} guides`;
    countBadge.style.display = 'inline-block';
    empty.style.display = filtered.length ? 'none' : 'block';
    grid.innerHTML = filtered.length ? filtered.map(card).join('') : '';
  }

  async function fetchSitemap(url){
    const res = await fetch(url, {cache:'no-store'});
    if(!res.ok) throw new Error('Sitemap ikke fundet: ' + url);
    const xml = await res.text();
    const matches = Array.from(xml.matchAll(/<loc>\s*([^<]+)\s*<\/loc>/g)).map(m => m[1]);
    return matches
      .map(u => new URL(u, location.origin))
      .filter(u => u.pathname.startsWith('/guides/') && u.pathname.endsWith('.html'))
      .map(u => u.pathname);
  }

  async function loadAll(){
    try{
      const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
      if (cached && (Date.now() - cached.ts) < CACHE_TTL_MS) return cached.items;
    }catch(_){}
    let urls = [];
    try{ urls = await fetchSitemap(PRIMARY_SITEMAP); }
    catch(_){ try{ urls = await fetchSitemap(FALLBACK_SITEMAP); }catch(e){ urls = []; } }
    urls.sort((a,b)=> titleFromSlug(a).localeCompare(titleFromSlug(b), 'da'));
    try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), items: urls })); }catch(_){}
    return urls;
  }

  const onSearch = debounce(()=> render(ALL_URLS), 150);
  q.addEventListener('input', onSearch);
  q.addEventListener('keydown', e=>{ if(e.key==='Escape'){ q.value=''; onSearch(); q.blur(); }});

  let ALL_URLS = [];
  loadAll().then(urls => {
    ALL_URLS = urls;
    render(ALL_URLS);
  }).catch(()=>{
    grid.innerHTML = '<p class="meta">Kunne ikke hente guides.</p>';
  });
})();
</script>
</body>
</html>
