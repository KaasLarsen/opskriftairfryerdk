<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Madplaner – Nemme & sunde forslag til hverdag og vægttab</title>
  <meta name="description" content="Få overblik over alle vores madplaner – fra sund hverdagsmad til vægttabsvenlige airfryer-retter. Søgefelt, kategorier og inspiration samlet ét sted." />
  <link rel="icon" href="/img/favicon.ico" />
  <link rel="stylesheet" href="/assets/styles.css?v=17" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7373148222153531" crossorigin="anonymous"></script>
</head>
<body class="has-fixed-header">
  <div data-include="/partials/icons.html"></div>
  <div data-include="/partials/header.html"></div>

  <main class="container">
    <section class="hero">
      <div>
        <span class="kicker">Overblik</span>
        <h1>Madplaner</h1>
        <p class="lead">Alle vores madplaner samlet ét sted – vælg mellem sunde planer, airfryer-mad, vægttabsvenlige forslag og meget mere.</p>

        <div class="panel-search" role="search">
          <form onsubmit="event.preventDefault();">
            <input id="search-input" type="search" placeholder="Søg i madplaner… (fx kylling, vægttab, ugeplan)" />
            <button class="btn primary" type="submit">Søg</button>
          </form>
        </div>
      </div>
      <div class="hero-box">
        <svg class="hero-ico"><use href="#calendar"></use></svg>
      </div>
    </section>

    <!-- Nemt i hverdagen -->
    <section class="section">
      <div class="section-head"><h2><svg class="ico-inline"><use href="#sparkles"></use></svg>Nemt i hverdagen</h2></div>
      <div class="grid grid-3" data-mp-grid data-tag="hverdag" data-limit="6"></div>
    </section>

    <!-- Vægttab -->
    <section class="section">
      <div class="section-head"><h2><svg class="ico-inline"><use href="#leaf"></use></svg>Madplaner til vægttab</h2></div>
      <div class="grid grid-3" data-mp-grid data-tag="vægttab" data-limit="6"></div>
    </section>

    <!-- For 2 -->
    <section class="section">
      <div class="section-head"><h2><svg class="ico-inline"><use href="#bowl"></use></svg>For 2 personer</h2></div>
      <div class="grid grid-3" data-mp-grid data-tag="for2" data-limit="6"></div>
    </section>

    <!-- Alle planer (søger mål) -->
    <section class="section">
      <div class="section-head"><h2><svg class="ico-inline"><use href="#star"></use></svg>Alle planer</h2></div>
      <div class="grid grid-3" data-mp-all></div>
    </section>

<section class="section">
  <div class="section-head">
    <h2><svg class="ico-inline"><use href="#cart"></use></svg>Tilbud & Udstyr</h2>
  </div>

  <div class="pr-carousel" id="pr-carousel">
    <!-- SLIDE 1 -->
    <div class="pr-slide is-active">
      <div style="min-height:220px">
        <div id="pr-product-widget-e0348930" style="display:block;width:100%"></div>
        <script src="https://api.pricerunner.com/publisher-widgets/dk/product.js?onlyInStock=true&offerOrigin=NATIONAL&offerLimit=3&productId=3280146314&partnerId=adrunner_dk_opskrift-airfryer&widgetId=pr-product-widget-e0348930" async></script>
      </div>
      <div style="display:inline-block;margin-top:6px">
        <a href="https://www.pricerunner.dk/pl/81-3280146314/Frituregryder/Ninja-Double-Stack-XL-2-Level-Air-Fryer-9.5L-Sammenlign-Priser" rel="nofollow">
          <p style="font:14px 'Klarna Text',Helvetica,sans-serif;font-style:italic;color:var(--muted);text-decoration:underline">
            Annonce i samarbejde med <span style="font-weight:bold">PriceRunner</span>
          </p>
        </a>
      </div>
    </div>

    <!-- SLIDE 2 -->
    <div class="pr-slide">
      <div style="min-height:220px">
        <div id="pr-product-widget-f262c590" style="display:block;width:100%"></div>
        <script src="https://api.pricerunner.com/publisher-widgets/dk/product.js?onlyInStock=true&offerOrigin=NATIONAL&offerLimit=3&productId=3200256729&partnerId=adrunner_dk_opskrift-airfryer&widgetId=pr-product-widget-f262c590" async></script>
      </div>
      <div style="display:inline-block;margin-top:6px">
        <a href="https://www.pricerunner.dk/pl/81-3200256729/Frituregryder/Xiaomi-Mi-Smart-Air-Fryer-Sammenlign-Priser" rel="nofollow">
          <p style="font:14px 'Klarna Text',Helvetica,sans-serif;font-style:italic;color:var(--muted);text-decoration:underline">
            Annonce i samarbejde med <span style="font-weight:bold">PriceRunner</span>
          </p>
        </a>
      </div>
    </div>

    <!-- SLIDE 3 -->
    <div class="pr-slide">
      <div style="min-height:220px">
        <div id="pr-product-widget-0a362ae0" style="display:block;width:100%"></div>
        <script src="https://api.pricerunner.com/publisher-widgets/dk/product.js?onlyInStock=true&offerOrigin=NATIONAL&offerLimit=3&productId=3231353404&partnerId=adrunner_dk_opskrift-airfryer&widgetId=pr-product-widget-0a362ae0" async></script>
      </div>
      <div style="display:inline-block;margin-top:6px">
        <a href="https://www.pricerunner.dk/pl/81-3231353404/Frituregryder/Philips-3000-Series-NA352-00-Sammenlign-Priser" rel="nofollow">
          <p style="font:14px 'Klarna Text',Helvetica,sans-serif;font-style:italic;color:var(--muted);text-decoration:underline">
            Annonce i samarbejde med <span style="font-weight:bold">PriceRunner</span>
          </p>
        </a>
      </div>
    </div>

    <!-- Navigation -->
    <button class="pr-nav pr-prev" aria-label="Forrige">‹</button>
    <button class="pr-nav pr-next" aria-label="Næste">›</button>
  </div>

  <div class="pr-dots" id="pr-dots"></div>
</section>

<script>
(function(){
  function ready(fn){ if(document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded',fn); }
  ready(function(){
    var root=document.getElementById('pr-carousel'); if(!root) return;
    var slides=[...root.querySelectorAll('.pr-slide')];
    var prev=root.querySelector('.pr-prev'), next=root.querySelector('.pr-next');
    var dotsWrap=document.getElementById('pr-dots'); if(slides.length<=1) return;
    var i=slides.findIndex(s=>s.classList.contains('is-active')); if(i<0) i=0;
    function show(n){
      slides.forEach(s=>s.classList.remove('is-active'));
      slides[n].classList.add('is-active');
      dotsWrap.querySelectorAll('.pr-dot').forEach((d,k)=>d.classList.toggle('is-active',k===n));
      i=n;
    }
    function mkDots(){
      dotsWrap.innerHTML=slides.map((_,k)=>'<button class="pr-dot" aria-label="Slide '+(k+1)+'"></button>').join('');
      dotsWrap.querySelectorAll('.pr-dot').forEach((b,k)=>b.addEventListener('click',()=>show(k)));
    }
    mkDots(); show(i);
    prev&&prev.addEventListener('click',()=>show((i-1+slides.length)%slides.length));
    next&&next.addEventListener('click',()=>show((i+1)%slides.length));
  });
})();
</script>


        <!-- Navigation -->
        <button class="pr-nav pr-prev" aria-label="Forrige">‹</button>
        <button class="pr-nav pr-next" aria-label="Næste">›</button>
      </div>

      <!-- Dots -->
      <div class="pr-dots" id="pr-dots"></div>
    </section>
  </main>

  <div data-include="/partials/footer.html"></div>

  <!-- Partials + data + hub -->
  <script src="/assets/include.js?v=4"></script>
  <script src="/assets/madplaner.js?v=1"></script>
  <script src="/assets/madplan-hub.js?v=2"></script>

  <!-- PriceRunner loader + init + slider -->
  <script>
  (function () {
    function ready(fn){
      if (document.readyState === 'complete' || document.readyState === 'interactive') return fn();
      document.addEventListener('DOMContentLoaded', fn);
    }

    ready(function(){
      // 1) Indlæs PR script KUN én gang
      function loadPR(cb){
        if (window.__PR_WIDGET_LOADED__) return cb && cb();
        var s = document.createElement('script');
        s.src = "https://api.pricerunner.com/publisher-widgets/dk/product.js?onlyInStock=true&offerOrigin=NATIONAL&offerLimit=3&partnerId=adrunner_dk_opskrift-airfryer";
        s.async = true;
        s.onload = function(){ window.__PR_WIDGET_LOADED__ = true; cb && cb(); };
        document.body.appendChild(s);
      }

      // 2) Robust init – accepterer forskellige global-navne
      function initWidgets(){
        const PR = window.PRICE_RUNNER_PRODUCT_WIDGET
                || window.PR_PRODUCT_WIDGET
                || (window.PRICE_RUNNER && window.PRICE_RUNNER.PRODUCT_WIDGET);
        if (!PR) return;

        PR.init({ productId:"3280146314", widgetId:"pr-product-widget-e0348930", offerLimit:3, onlyInStock:true, offerOrigin:"NATIONAL" });
        PR.init({ productId:"3200256729", widgetId:"pr-product-widget-f262c590", offerLimit:3, onlyInStock:true, offerOrigin:"NATIONAL" });
        PR.init({ productId:"3231353404", widgetId:"pr-product-widget-0a362ae0", offerLimit:3, onlyInStock:true, offerOrigin:"NATIONAL" });
      }

      // 3) Simpel carousel (samme som forsiden)
      function initCarousel(){
        var root = document.getElementById('pr-carousel');
        if (!root) return;
        var slides = Array.from(root.querySelectorAll('.pr-slide'));
        var prev = root.querySelector('.pr-prev');
        var next = root.querySelector('.pr-next');
        var dotsWrap = document.getElementById('pr-dots');
        if (slides.length <= 1) return;

        var i = Math.max(0, slides.findIndex(s=>s.classList.contains('is-active')));
        var timer = null, INTERVAL = 6000;

        function show(n){
          slides.forEach(s=>s.classList.remove('is-active'));
          slides[n].classList.add('is-active');
          if (dotsWrap){
            dotsWrap.querySelectorAll('.pr-dot').forEach((d,k)=>d.classList.toggle('is-active', k===n));
          }
          i = n;
        }
        function nextSlide(){ show((i+1) % slides.length); }
        function prevSlide(){ show((i-1+slides.length) % slides.length); }
        function start(){
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
          stop(); timer = setInterval(nextSlide, INTERVAL);
        }
        function stop(){ if (timer){ clearInterval(timer); timer = null; } }
        function makeDots(){
          if (!dotsWrap) return;
          dotsWrap.innerHTML = slides.map((_,k)=>'<button class="pr-dot" aria-label="Slide '+(k+1)+'"></button>').join('');
          dotsWrap.querySelectorAll('.pr-dot').forEach((btn,k)=>btn.addEventListener('click', function(){ stop(); show(k); start(); }));
        }

        prev && prev.addEventListener('click', function(){ stop(); prevSlide(); start(); });
        next && next.addEventListener('click', function(){ stop(); nextSlide(); start(); });
        root.addEventListener('mouseenter', stop);
        root.addEventListener('mouseleave', start);
        document.addEventListener('visibilitychange', function(){ if (document.hidden) stop(); else start(); });

        makeDots(); show(i); start();
      }

      loadPR(function(){
        initWidgets();
        initCarousel();
      });
    });
  })();
  </script>
  <script>
(function(){
  function ready(fn){ if(document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded',fn); }

  function card(mp){
    return `
      <a class="card card--guide" href="${mp.href}">
        <div class="thumb-icon"><svg><use href="#${mp.icon||'star'}"></use></svg></div>
        <div class="card-body">
          <h3>${mp.title}</h3>
          <p class="meta">${mp.desc||''}</p>
        </div>
      </a>`;
  }

  function renderSections(mp){
    document.querySelectorAll('[data-mp-grid]').forEach(node=>{
      const tag=(node.getAttribute('data-tag')||'').toLowerCase();
      const limit=parseInt(node.getAttribute('data-limit')||'0',10)||mp.length;
      const items=mp.filter(m=>(m.tags||[]).some(t=>t.toLowerCase()===tag)).slice(0,limit);
      node.innerHTML=items.map(card).join('');
    });
    const all=document.querySelector('[data-mp-all]');
    if(all) all.innerHTML=mp.map(card).join('');
  }

  function wireSearch(mp){
    const input=document.getElementById('search-input');
    const all=document.querySelector('[data-mp-all]');
    if(!input||!all) return;
    let last='';
    input.addEventListener('input',function(){
      const q=(this.value||'').trim().toLowerCase();
      if(q===last) return; last=q;
      if(!q){
        // vis sektionerne igen
        document.querySelectorAll('[data-mp-grid]').forEach(n=>n.parentElement.style.display='');
        all.innerHTML=mp.map(card).join('');
        return;
      }
      // gem sektionerne under søgning
      document.querySelectorAll('[data-mp-grid]').forEach(n=>n.parentElement.style.display='none');
      const hit=mp.filter(m=>{
        const hay=(m.title+' '+(m.desc||'')+' '+(m.tags||[]).join(' ')).toLowerCase();
        return hay.includes(q);
      });
      all.innerHTML=hit.length?hit.map(card).join(''):'<p class="copy">Ingen madplaner matcher din søgning.</p>';
    });
  }

  function boot(){
    // Vent kort på datafil hvis den loader efter
    let tries=0;
    (function wait(){
      if(Array.isArray(window.MP)&&window.MP.length){
        const data=window.MP.slice();
        renderSections(data);
        wireSearch(data);
      }else if(tries++<60){ setTimeout(wait,50); }
      else{
        const all=document.querySelector('[data-mp-all]');
        if(all) all.innerHTML='<p class="copy">Kunne ikke indlæse madplaner (data mangler).</p>';
      }
    })();
  }

  ready(boot);
})();
</script>

</body>
</html>
